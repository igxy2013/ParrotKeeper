<!--pages/settings/settings.wxml-->
<view class="page-container {{pageThemeClass}}">
  <app-header title="设置" subtitle="个人偏好与系统设置" showBack="true">
    <view slot="actions" class="header-save-btn" bindtap="savePreferences">保存</view>
  </app-header>
  <view class="page-content">

    <view class="section-title">
      <text class="title-icon">🔧</text>
      <text>偏好设置</text>
    </view>

    <view class="settings-actions">
      <view class="setting-action-item" bindtap="exportData">
        <view class="setting-icon-wrapper">
          <view class="setting-icon export-icon">📤</view>
        </view>
        <view class="setting-content">
          <view class="setting-name">数据导出</view>
          <view class="setting-desc">导出我的鹦鹉与记录数据</view>
        </view>
        <view class="setting-arrow">></view>
      </view>

      <view class="setting-action-item" bindtap="showLanguageSheet">
        <view class="setting-icon-wrapper">
          <view class="setting-icon lang-icon">🌐</view>
        </view>
        <view class="setting-content">
          <view class="setting-name">语言切换</view>
          <view class="setting-desc">当前：{{languageDisplay}}</view>
        </view>
        <view class="setting-arrow">></view>
      </view>

      <view class="setting-action-item" bindtap="showThemeSheet">
        <view class="setting-icon-wrapper">
          <view class="setting-icon theme-icon">🎨</view>
        </view>
        <view class="setting-content">
          <view class="setting-name">主题选择</view>
          <view class="setting-desc">当前：{{themeDisplay}}</view>
        </view>
        <view class="setting-arrow">></view>
      </view>

      <view class="setting-action-item">
        <view class="setting-icon-wrapper">
          <view class="setting-icon notify-icon">🔔</view>
        </view>
        <view class="setting-content">
          <view class="setting-name">通知设置</view>
          <view class="setting-desc">开启推送与提醒</view>
        </view>
        <switch checked="{{notificationsEnabled}}" bindchange="toggleNotifications" />
      </view>

      <view class="setting-action-item" bindtap="showAbout">
        <view class="setting-icon-wrapper">
          <view class="setting-icon about-icon">ℹ️</view>
        </view>
        <view class="setting-content">
          <view class="setting-name">关于应用</view>
          <view class="setting-desc">查看应用版本和信息</view>
        </view>
        <view class="setting-arrow">></view>
      </view>

      <view class="setting-action-item" bindtap="showHelp">
        <view class="setting-icon-wrapper">
          <view class="setting-icon help-icon">❓</view>
        </view>
        <view class="setting-content">
          <view class="setting-name">帮助反馈</view>
          <view class="setting-desc">获取帮助或提交反馈</view>
        </view>
        <view class="setting-arrow">></view>
      </view>

      <view class="setting-action-item logout-item" bindtap="handleLogout">
        <view class="setting-icon-wrapper">
          <view class="setting-icon logout-icon">🚪</view>
        </view>
        <view class="setting-content">
          <view class="setting-name">退出登录</view>
          <view class="setting-desc">安全退出当前账户</view>
        </view>
        <view class="setting-arrow">></view>
      </view>
    </view>

  </view>
</view>

<!-- 语言切换底部弹窗 -->
<view class="lang-sheet-overlay" wx:if="{{showLangSheet}}">
  <view class="lang-sheet-mask" bindtap="closeLangSheet"></view>
  <view class="lang-sheet">
    <view class="lang-sheet-header">
      <text class="lang-sheet-title">语言切换</text>
      <text class="lang-sheet-close" bindtap="closeLangSheet">取消</text>
    </view>
    <view class="lang-options">
      <view class="lang-option" data-lang="zh-CN" bindtap="chooseLanguage">
        <text class="lang-name">简体中文</text>
        <text class="lang-check" wx:if="{{language === 'zh-CN'}}">✓</text>
      </view>
      <view class="lang-option" data-lang="en-US" bindtap="chooseLanguage">
        <text class="lang-name">English</text>
        <text class="lang-check" wx:if="{{language === 'en-US'}}">✓</text>
      </view>
    </view>
  </view>
</view>
