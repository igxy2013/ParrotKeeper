<view class="page-container">
  <app-header title="登录" subtitle="请选择模式并登录"></app-header>
  <view class="page-content">
    <view class="login-card">
      <image class="logo" src="/images/logo.png" mode="widthFix"/>
      <view class="logo-title">鹦鹉管家AI</view>
      <view class="mode-selection">
        <view class="mode-title">选择使用模式</view>
        <view class="mode-options">
          <view class="mode-option mode-personal {{selectedMode === 'personal' ? 'active' : ''}}" bindtap="selectMode" data-mode="personal">
            <image class="mode-icon-img" src="/images/remix/user-line.png" mode="widthFix"/>
            <view class="mode-name">个人模式</view>
            <view class="mode-desc">管理个人鹦鹉数据</view>
            <image wx:if="{{selectedMode === 'personal'}}" class="selected-badge" src="/images/remix/checkbox-circle-fill-white.png" mode="widthFix"/>
          </view>
          <view class="mode-option mode-team {{selectedMode === 'team' ? 'active' : ''}}" bindtap="selectMode" data-mode="team">
            <image class="mode-icon-img" src="/images/remix/group-line.png" mode="widthFix"/>
            <view class="mode-name">团队模式</view>
            <view class="mode-desc">管理团队鹦鹉数据</view>
            <image wx:if="{{selectedMode === 'team'}}" class="selected-badge" src="/images/remix/checkbox-circle-fill-white.png" mode="widthFix"/>
          </view>
        </view>
      </view>

      <view class="form">
        <view class="input-group">
          <image class="input-icon-img" src="/images/remix/user-fill.png" mode="widthFix"/>
          <input 
            class="input-field input-with-icon" 
            type="text" 
            placeholder="请输入用户名" 
            value="{{username}}" 
            bindinput="onUsernameInput"
            maxlength="20"
          />
        </view>

        <view class="input-group">
          <image class="input-icon-img" src="/images/remix/lock-fill.png" mode="widthFix"/>
          <input 
            class="input-field input-with-icon input-with-right-icon" 
            type="text" 
            password="{{!showPassword}}"
            placeholder="请输入密码" 
            value="{{password}}" 
            bindinput="onPasswordInput"
            maxlength="20"
          />
          <image class="password-toggle" src="{{showPassword ? '/images/remix/eye-fill.png' : '/images/remix/eye-off-fill.png'}}" mode="widthFix" catchtap="togglePasswordVisibility"/>
        </view>

        <button class="btn btn-primary btn-large" bindtap="onAccountLogin" disabled="{{!canLogin}}">账号登录</button>
        <view class="register-link" bindtap="onRegister">还没有账号？立即注册</view>
      </view>

      <view class="divider">
        <view class="divider-line"></view>
        <view class="divider-text">或</view>
        <view class="divider-line"></view>
      </view>

      <button class="btn btn-primary btn-large" bindtap="onWechatLogin" disabled="{{!canLogin}}">微信快速登录</button>
    </view>
  </view>
</view>
