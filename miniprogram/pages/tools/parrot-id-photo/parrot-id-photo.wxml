<view class="page-container">
  <app-header title="鹦鹉证件照" subtitle="上传照片，生成白底证件照" showBack="true"></app-header>
  <view class="content">
    <view class="upload-card">
      <view class="upload-row">
        <button class="btn btn-secondary" bindtap="choosePhoto">选择照片</button>
        <button class="btn btn-primary" bindtap="generateIdPhoto" disabled="{{!sourceUrl || generating}}">开始制作</button>
      </view>
      <view class="preview-row" wx:if="{{sourceUrl}}">
        <view class="preview-col">
          <text class="preview-title">原始照片</text>
          <image class="preview-image" src="{{sourceUrl}}" mode="aspectFill" bindtap="previewSource" />
        </view>
        <view class="preview-col" wx:if="{{resultUrl}}">
          <text class="preview-title">生成结果</text>
          <image class="preview-image" src="{{resultUrl}}" mode="aspectFill" bindtap="previewResult" />
          <button class="btn btn-success" bindtap="saveResult">保存到相册</button>
        </view>
      </view>
    </view>
  </view>
  <bottom-nav active="profile" />
</view>
