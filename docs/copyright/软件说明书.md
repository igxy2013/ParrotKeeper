# 鹦鹉管家（ParrotKeeper）软件说明书

## 一、软件概述
- 软件名称：鹦鹉管家（ParrotKeeper）
- 版本：v1.0.0（以当前代码为准）
- 著作权人：项目所有者（以登记申请信息为准）
- 完成日期：以提交审核日期为准
- 运行环境：
  - 客户端：微信小程序（面向中文用户展示）、Web 前端
  - 服务端：Python Flask（WSGI：Waitress），操作系统 Windows/Linux
  - 数据库：MySQL 8.x（字符集 utf8mb4）

## 二、总体功能
- 鹦鹉档案管理：建立鹦鹉基础信息、品种、编号、脚环号等
- 喂食记录管理：记录每日喂食类型、数量与时间
- 健康记录管理：体重、体温、检查与治疗、用药、费用
- 清洁记录管理：笼舍、玩具、栖木、食水等清洁类型
- 繁殖记录与孵化：配对记录、产蛋、孵化过程与建议
- 收支与统计：支出与收入记录、趋势统计与图表
- 团队协作：团队与成员、权限与分组、数据共享
- 通知与提醒：订阅消息、日常提醒、护理指南
- 系统公告与反馈：公告中心、用户反馈、后台管理

## 三、系统架构
- 前端：
  - 微信小程序：通用顶部导航组件（/components/app-header）、底部导航组件（/components/bottom-nav）、数字键盘组件（/components/numeric-keyboard）、弹窗样式参照添加新鹦鹉弹窗（/components/parrot-modal）
  - Web 前端：基于 Vue 组件化（如 SideNav.vue），中文导航与管理功能
- 后端：
  - Flask 应用工厂模式（backend/app.py），蓝图路由模块化（auth、parrots、records、statistics、expenses、teams、achievements、notifications、care_guide、feedback、settings、admin、announcements、ai、incubation、market、categories、reports、pairings、redemption）
  - SQLAlchemy ORM 模型（backend/models.py、team_models.py），Marshmallow 序列化（backend/schemas.py）
- 数据库：
  - schema.sql 定义核心数据表与约束（users、parrot_species、parrots、feed_types、feeding_records、health_records、cleaning_records、breeding_records、expenses、incomes、reminders、user_statistics、user_points_records、feedbacks、announcements）
- 部署：
  - Windows：start_backend.bat 使用 Waitress 启动 WSGI 服务
  - Linux：start_parrotkeeper.sh 创建虚拟环境并运行服务

## 四、核心模块说明（摘要）
- 用户与账号：用户基础信息、账号表与密码哈希、积分记录与统计
- 鹦鹉品种与档案：品种特征、参考体重与羽色；档案含编号、脚环、出生与健康状态
- 记录类模块：喂食、健康、清洁、繁殖，统一时间与照片收集，摘要展示
- 团队协作：团队、成员、分组与权限清单，支持个人/团队数据模式
- 收支模块：支出与收入类别、金额与日期，支持与鹦鹉关联
- 通知与提醒：订阅消息推送、提醒类型与频率，护理指南缓存与展示
- AI 与工具：配对计算器与建议、孵化建议、参考价格维护
- 后台管理：系统公告、用户管理、备份与同步、API 配置、会员模式管理

## 五、主要接口（蓝图示例）
- /api/auth：登录注册、密码、设置
- /api/parrots：鹦鹉档案增删改查、转移码
- /api/records：喂食/健康/清洁/繁殖记录增删改查、分页与统计
- /api/statistics：多维统计与趋势
- /api/expenses：支出与收入管理
- /api/teams：团队与成员管理、权限清单
- /api/achievements：成就系统与用户统计
- /api/notifications：订阅消息发送
- /api/care-guide：护理指南读写
- /api/feedback：用户反馈
- /api/settings：系统与用户设置
- /api/admin：后台管理与备份
- /api/announcements：公告中心
- /api/ai：智能建议与配对分析
- /api/incubation：孵化记录与日志
- /api/market：参考价格
- /api/categories：交易类别与饲料类型
- /api/reports：报表导出
- /api/pairings：配对记录
- /api/redemption：兑换码与会员

## 六、数据库概览（摘录）
- users：openid、昵称、头像、手机号、积分、时间戳
- parrot_species：名称、描述、寿命、体型、饲养难度等
- parrots：所属用户、品种、性别、编号、脚环、羽色分裂、健康状态
- feeding_records：鹦鹉、饲料、喂食量与时间
- health_records：类型、体重、体温、症状、治疗、费用与时间
- cleaning_records：清洁类型、描述与时间
- breeding_records：配对、产蛋与孵化情况
- expenses/incomes：收支类别、金额、日期、关联鹦鹉
- reminders：提醒类型、标题、频率与启用状态
- 其他：反馈、公告、用户统计与积分记录

## 七、安装部署
- 后端依赖：backend/requirements.txt 或根目录 requirements.txt
- 启动：Windows 使用 start_backend.bat；Linux 使用 start_parrotkeeper.sh
- 数据库初始化：database/schema.sql 与 init_database.py

## 八、使用说明（小程序）
- 首页卡片：今日喂食、月度收入/支出、体重趋势、通知中心
- 我的鹦鹉：新增、编辑、详情与弹窗；底部导航
- 记录模块：喂食/健康/清洁/繁殖的新增与查询
- 统计模块：多维图表与趋势
- 收支管理：支出/收入、类别与图表
- 护理指南：物种护理建议与缓存
- 团队管理：加入/创建团队、成员与分组
- 设置中心：通知、类别、食物类型与反馈
- 后台管理：公告、用户、API、备份与会员模式

## 九、安全与隐私
- 密码哈希与令牌校验、会话态验证
- 数据分权：个人/团队模式区分，权限清单集中管理
- 敏感配置不入库：禁止 .env 修改与密钥提交

## 十、知识产权声明
- 本软件源代码与文档由项目所有者享有著作权
- 未经许可，禁止复制、传播与商用

（本说明书用于软件著作权鉴别材料，可配合源程序选段打印提交）

